<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>üé≠ Briser la bulle de filtre !</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #f7f7f7; min-height: 100vh; padding: 20px; }
    .container { max-width: 1200px; margin: 0 auto; background: #fff; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,.05); overflow: hidden; }
    .header { background: #fff; color: #333; padding: 30px; text-align: center; border-bottom: 1px solid #eee; }
    .header h1 { font-size: 2.5em; margin-bottom: 10px; color: #833ab4; }
    .activity { display: none; padding: 30px; animation: slideIn .5s ease-out; }
    .activity.active { display: block; }
    @keyframes slideIn { from { opacity: 0; transform: translateX(20px); } to { opacity: 1; transform: translateX(0); } }
    .profiles { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin: 20px 0; }
    .profile-card { background: #fff; border-radius: 15px; padding: 20px; text-align: center; border: 1px solid #dbdbdb; transition: all .3s ease; box-shadow: 0 2px 4px rgba(0,0,0,.03); display: flex; flex-direction: column; align-items: center; }
    .profile-card:hover { transform: translateY(-5px); box-shadow: 0 8px 20px rgba(0,0,0,.08); }
    .profile-image-container { width: 100%; }
    .profile-image-container img { width: 100%; max-width: 100%; height: auto; border-radius: 12px; margin-bottom: 15px; border: 1px solid #eee; }
    .drag-zone { background: #fcfcfc; border: 2px dashed #a8b9c8; border-radius: 10px; min-height: 120px; margin: 15px 0; display: flex; flex-wrap: wrap; gap: 10px; padding: 15px; align-items: flex-start; align-content: flex-start; transition: all .3s ease; width: 100%; cursor: copy; }
    .drag-zone.drag-over { background: #eef1f6; border-color: #405de6; transform: scale(1.01); cursor: grabbing; }
    .drag-zone:empty::after, .drop-zone:empty::after { content: "D√©pose les suggestions ici"; display: block; font-size: 14px; color: #8aa0b3; font-style: italic; opacity: .9; }
    .suggestion-item { background: #fff; color: #333; padding: 10px 15px; border-radius: 20px; cursor: grab; transition: all .3s ease; user-select: none; font-size: 14px; font-weight: 500; border: 1px solid #dbdbdb; box-shadow: 0 1px 3px rgba(0,0,0,.05); }
    .suggestion-item:hover { transform: scale(1.05); border-color: #405de6; box-shadow: 0 3px 8px rgba(64,93,230,.1); }
    .suggestion-item:active { cursor: grabbing; transform: scale(.95); }
    .suggestions-pool { background: #fff; border: 1px solid #eee; border-radius: 12px; padding: 20px; margin: 20px 0; box-shadow: 0 1px 5px rgba(0,0,0,.02); }
    .suggestions-pool h3 { color: #833ab4; margin-bottom: 15px; text-align: center; }
    .suggestions-grid { display: flex; flex-wrap: wrap; gap: 10px; justify-content: center; }
    .btn { background: linear-gradient(45deg,#405de6,#833ab4); color: #fff; border: none; padding: 12px 25px; border-radius: 8px; font-size: 15px; cursor: pointer; transition: all .3s ease; margin: 10px; box-shadow: 0 4px 10px rgba(64,93,230,.3); }
    .btn:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(64,93,230,.5); }
    .progress-bar { background: #e0e0e0; height: 6px; border-radius: 3px; margin: 20px 0; overflow: hidden; }
    .progress-fill { background: linear-gradient(45deg,#833ab4,#fd1d1d,#fcb045); height: 100%; transition: width .5s ease; border-radius: 3px; }
    .score { text-align: center; font-size: 1.2em; color: #333; font-weight: bold; margin: 15px 0; }
    .feedback { background: #f0fff0; border-left: 4px solid #4caf50; padding: 15px; margin: 15px 0; border-radius: 0 8px 8px 0; animation: slideIn .5s ease-out; color: #333; }
    .navigation { display: flex; justify-content: space-between; align-items: center; margin-top: 30px; padding-top: 20px; border-top: 1px solid #eee; }
    .activity-title { color: #333; margin-bottom: 20px; font-size: 1.8em; text-align: center; }
    .checklist { background: #fff; border-radius: 15px; padding: 20px; margin: 20px 0; border: 1px solid #eee; }
    .checklist-item { display: flex; align-items: center; gap: 12px; margin: 10px 0; padding: 10px; border-radius: 8px; transition: background .3s ease; }
    .checklist-item:hover { background: #f7f9ff; }
    .checklist-item input[type="checkbox"] { margin-right: 12px; transform: scale(1.2); accent-color: #405de6; }
    .vs-container { display: grid; grid-template-columns: 1fr auto 1fr; gap: 20px; align-items: start; margin: 20px 0; }
    .vs-column { background: #fcfcfc; border-radius: 12px; padding: 20px; min-height: 200px; border: 1px solid #eee; }
    .vs-separator { display: flex; align-items: center; justify-content: center; font-size: 2em; font-weight: bold; color: #405de6; }
    .drop-zone { background: #f0f4f7; border: 2px dashed #a8b9c8; border-radius: 10px; min-height: 50px; margin: 10px 0; display: flex; flex-wrap: wrap; gap: 8px; padding: 10px; transition: all .3s ease; cursor: copy; }
    .drop-zone.drag-over { background: #eef1f6; border-color: #405de6; transform: scale(1.01); cursor: grabbing; }
    .advantage-item,.disadvantage-item { padding: 8px 12px; border-radius: 20px; cursor: grab; font-size: 14px; transition: all .3s ease; user-select: none; background: #fcfcfc; color: #444; border: 1px solid #dbdbdb; box-shadow: 0 1px 3px rgba(0,0,0,.05); }
    .advantage-item:hover,.disadvantage-item:hover { transform: scale(1.05); border-color: #a8b9c8; }
    .teacher-points { display: flex; align-items: center; gap: 12px; background: #fcfcfc; border: 1px solid #eee; padding: 12px; border-radius: 10px; margin-top: 16px; }
    .teacher-points input[type="number"] { width: 90px; padding: 6px 8px; border: 1px solid #dbdbdb; border-radius: 8px; font-size: 16px; }
    .hint { font-size: 12px; color: #6b7280; }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1> Briser la bulle de filtre !</h1>
      <p>Quiz interactif sur l'IA et les recommandations</p>
      <div class="progress-bar"><div class="progress-fill" id="progressFill" style="width: 20%"></div></div>
      <div class="score" id="score">Score: 0/100</div>
    </div>

    <!-- Activit√© 1 -->
    <div class="activity active" id="activity1">
      <h2 class="activity-title"> Activit√© 1 : Algorithme de recommandation ?</h2>
      <p style="text-align:center;color:#666;margin-bottom:30px;">Observez les profils Instagram ci-dessous et associez comme le ferait l'algorithme d'Instagral, les suggestions vers le bon profil.</p>
      <div class="profiles">
        <div class="profile-card" data-profile="liam">
          <div class="profile-image-container"><img src="insta3.png" alt="Profil Instagram de Liam_GoalAndGaming (Football & Gaming)"></div>
          <div class="drag-zone" data-profile="liam"></div>
        </div>
        <div class="profile-card" data-profile="sophie">
          <div class="profile-image-container"><img src="insta.png" alt="Profil Instagram de Sophie.HomeAndHealth (Cuisine & D√©co)"></div>
          <div class="drag-zone" data-profile="sophie"></div>
        </div>
        <div class="profile-card" data-profile="jiwou">
          <div class="profile-image-container"><img src="insta2.png" alt="Profil Instagram de Ji-wouKim (K-pop & Mode)"></div>
          <div class="drag-zone" data-profile="jiwou"></div>
        </div>
      </div>
      <div class="suggestions-pool">
        <h3>üì± Suggestions √† associer</h3>
        <div class="suggestions-grid" id="suggestionsPool">
          <div class="suggestion-item" data-target="liam" draggable="true">gaming_pro_tips</div>
          <div class="suggestion-item" data-target="sophie" draggable="true">cuisine_famille_heureuse</div>
          <div class="suggestion-item" data-target="jiwou" draggable="true">kpop_dance_covers</div>
          <div class="suggestion-item" data-target="liam" draggable="true">setup_game_gamer</div>
          <div class="suggestion-item" data-target="sophie" draggable="true">deco_cocooning_facile</div>
          <div class="suggestion-item" data-target="jiwou" draggable="true">beauty_hacks_for_you</div>
          <div class="suggestion-item" data-target="liam" draggable="true">esports_news_daily</div>
          <div class="suggestion-item" data-target="sophie" draggable="true">recettes_pour_petits_grands</div>
          <div class="suggestion-item" data-target="jiwou" draggable="true">korean_fashion_inspiration</div>
        </div>
      </div>
      <div class="navigation">
        <div></div>
        <button class="btn" onclick="checkActivity1()">V√©rifier mes r√©ponses</button>
        <button class="btn" onclick="nextActivity()" id="nextA2" style="display:none;">Activit√© suivante ‚Üí</button>
      </div>
    </div>

    <!-- Activit√© 2 -->
    <div class="activity" id="activity2">
      <h2 class="activity-title"> Activit√© 2 : Donn√©es sensibles</h2>
      <p style="text-align:center;color:#666;margin-bottom:30px;">Cochez les informations sensibles que l'IA peut collecter sur ces profils.</p>
      <div class="checklist">
        <div class="checklist-item"><input type="checkbox" id="age" data-correct="true"><label for="age">üéÇ √Çge des mineurs (14 et 16 ans)</label></div>
        <div class="checklist-item"><input type="checkbox" id="location" data-correct="true"><label for="location">üìç Localisation (stades, magasins fr√©quent√©s)</label></div>
        <div class="checklist-item"><input type="checkbox" id="habits" data-correct="true"><label for="habits">‚è∞ Habitudes quotidiennes et routines</label></div>
        <div class="checklist-item"><input type="checkbox" id="social" data-correct="true"><label for="social">üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Entourage familial et amical</label></div>
        <div class="checklist-item"><input type="checkbox" id="preferences" data-correct="true"><label for="preferences">üíù Pr√©f√©rences personnelles intimes</label></div>
        <div class="checklist-item"><input type="checkbox" id="fake1" data-correct="false"><label for="fake1">üè¶ Informations bancaires</label></div>
        <div class="checklist-item"><input type="checkbox" id="fake2" data-correct="false"><label for="fake2">üìû Num√©ro de s√©curit√© sociale</label></div>
      </div>
      <div class="navigation">
        <button class="btn" onclick="previousActivity()">‚Üê Activit√© pr√©c√©dente</button>
        <button class="btn" onclick="checkActivity2()">V√©rifier mes r√©ponses</button>
        <button class="btn" onclick="nextActivity()" id="nextA3" style="display:none;">Activit√© suivante ‚Üí</button>
      </div>
    </div>

    <!-- Activit√© 3 -->
    <div class="activity" id="activity3">
      <h2 class="activity-title"> Activit√© 3 : Le pour et le contre</h2>
      <p style="text-align:center;color:#666;margin-bottom:30px;">Classez ces √©l√©ments selon qu'ils sont des avantages ou des inconv√©nients des recommandations IA.</p>
      <div class="suggestions-pool">
        <h3>üé≤ √âl√©ments √† classer</h3>
        <div class="suggestions-grid" id="itemsPool">
          <div class="advantage-item" data-type="advantage" draggable="true">Gain de temps dans les recherches</div>
          <div class="disadvantage-item" data-type="disadvantage" draggable="true">Enfermement dans une bulle</div>
          <div class="advantage-item" data-type="advantage" draggable="true">D√©couvertes cibl√©es sur nos go√ªts</div>
          <div class="disadvantage-item" data-type="disadvantage" draggable="true">Manipulation commerciale</div>
          <div class="advantage-item" data-type="advantage" draggable="true">Exp√©rience personnalis√©e</div>
          <div class="disadvantage-item" data-type="disadvantage" draggable="true">Perte d'autonomie de choix</div>
          <div class="disadvantage-item" data-type="disadvantage" draggable="true">Collecte excessive de donn√©es</div>
          <div class="advantage-item" data-type="advantage" draggable="true">Interface adapt√©e √† nos besoins</div>
        </div>
      </div>
      <div class="vs-container">
        <div class="vs-column">
          <h3 style="color:#4caf50;text-align:center;">‚úÖ AVANTAGES</h3>
          <div class="drop-zone" id="advantagesZone" data-type="advantage"></div>
        </div>
        <div class="vs-separator">VS</div>
        <div class="vs-column">
          <h3 style="color:#f44336;text-align:center;">‚ùå INCONV√âNIENTS</h3>
          <div class="drop-zone" id="disadvantagesZone" data-type="disadvantage"></div>
        </div>
      </div>
      <div class="navigation">
        <button class="btn" onclick="previousActivity()">‚Üê Activit√© pr√©c√©dente</button>
        <button class="btn" onclick="checkActivity3()">V√©rifier mes r√©ponses</button>
        <button class="btn" onclick="nextActivity()" id="nextA4" style="display:none;">Activit√© suivante ‚Üí</button>
      </div>
    </div>

    <!-- Activit√© 4 -->
    <div class="activity" id="activity4">
      <h2 class="activity-title"> Activit√© 4 : Kit Anti-Bulle</h2>
      <p style="text-align:center;color:#666;margin-bottom:30px;">Proposez un <strong>¬´ kit anti-bulle filtre ¬ª</strong> pour coll√©gien. √âcrivez 4 propositions pour reprendre le contr√¥le sur les recommandations IA et <strong>appelez votre professeur pour v√©rification</strong>.</p>
      <textarea id="antiBubbleKit" rows="10" placeholder="√âcrivez vos 4 propositions ici..." style="width:100%;padding:15px;border:1px solid #dbdbdb;border-radius:8px;font-size:16px;resize:vertical;box-shadow: inset 0 1px 3px rgba(0,0,0,.05);"></textarea>
      <div class="teacher-points">
        <label for="teacherPoints"><strong>Points attribu√©s par le professeur (0 √† 8)</strong></label>
        <input type="number" id="teacherPoints" min="0" max="8" value="0" inputmode="numeric" aria-label="Points du professeur pour l'activit√© 4" oninput="updateProgress()">
        <span class="hint">Ces points s'ajoutent au total final (sur 100).</span>
      </div>
      <div class="navigation">
        <button class="btn" onclick="previousActivity()">‚Üê Activit√© pr√©c√©dente</button>
        <button class="btn" onclick="nextActivity()" id="nextA5">Voir la synth√®se et mes r√©sultats ‚Üí</button>
      </div>
    </div>

    <!-- R√©sultats -->
    <div class="activity" id="activity5">
      <h2 class="activity-title">üèÜ R√©sultats et synth√®se</h2>
      <div id="finalResults" class="feedback">
        <h3>üìä Votre score final</h3>
        <p id="finalScore">Score : 0/100</p>
        <p id="finalMessage">Compl√©tez toutes les activit√©s pour voir votre r√©sultat !</p>
      </div>
      <div class="checklist">
        <h3>üéØ Points cl√©s √† retenir :</h3>
        <div class="checklist-item"><span>üîÆ</span><p><strong>Bulle de filtre :</strong> l'IA peut nous enfermer dans nos habitudes en ne montrant que du contenu similaire.</p></div>
        <div class="checklist-item"><span>ü§ñ</span><p><strong>Fonctionnement :</strong> l'IA analyse clics, temps de visionnage et autres signaux pour pr√©dire ce qui nous captive.</p></div>
        <div class="checklist-item"><span>üí∞</span><p><strong>Int√©r√™ts :</strong> l'engagement est souvent privil√©gi√© pour maximiser les profits publicitaires.</p></div>
        <div class="checklist-item"><span>üåà</span><p><strong>Solution :</strong> profiter de la personnalisation tout en planifiant des ¬´ sorties de bulle ¬ª volontaires.</p></div>
      </div>
      <div style="text-align:center;margin-top:30px;"><button class="btn" onclick="restartQuiz()">üîÑ Recommencer le quiz</button></div>
    </div>
  </div>

  <script>
    // Pond√©rations pour un total sur 100 (A1=40, A2=30, A3=22, A4 prof=8)
    const MAX_A1 = 40; const MAX_A2 = 30; const MAX_A3 = 22; const MAX_TEACHER = 8; // 40+30+22+8=100

    let currentActivity = 1;
    let totalScore = 0; // cumule A1..A3 (max 92)
    let draggedElement = null;
    const totalActivities = 5;

    function clamp(n, min, max){ n = parseInt(n,10); if (isNaN(n)) return min; return Math.max(min, Math.min(max, n)); }

    function getTeacherPoints(){
      const el = document.getElementById('teacherPoints');
      if (!el) return 0; return clamp(el.value || 0, 0, MAX_TEACHER);
    }

    // ---- Helper drop target
    function getDropZone(el){ return el ? el.closest('.drag-zone, .drop-zone') : null; }

    // Drag & drop (souris + tactile)
    function setupDragAndDrop(){
      document.addEventListener('dragstart', e=>{ if(e.target.draggable){ draggedElement = e.target; e.target.style.opacity='.5'; e.dataTransfer.effectAllowed='move'; } });
      document.addEventListener('dragend', e=>{ if(e.target.draggable){ e.target.style.opacity='1'; draggedElement=null; } });
      document.addEventListener('dragover', e=>{ const z=getDropZone(e.target); if(z){ e.preventDefault(); z.classList.add('drag-over'); }});
      document.addEventListener('dragleave', e=>{ const z=getDropZone(e.target); if(z){ z.classList.remove('drag-over'); }});
      document.addEventListener('drop', e=>{ const z=getDropZone(e.target); if(z && draggedElement){ e.preventDefault(); z.classList.remove('drag-over'); if(z!==draggedElement.parentNode){ z.appendChild(draggedElement); } }});

      // Tactile
      document.addEventListener('touchstart', function(e){
        if(e.target.draggable){
          e.preventDefault(); draggedElement = e.target; draggedElement.style.opacity='.5';
          const clone = draggedElement.cloneNode(true); clone.style.position='absolute'; clone.style.zIndex='1000'; clone.id='drag-clone'; clone.style.pointerEvents='none'; document.body.appendChild(clone);
          const upd = t=>{ clone.style.left = (t.pageX - clone.offsetWidth/2)+"px"; clone.style.top = (t.pageY - clone.offsetHeight/2)+"px"; };
          upd(e.touches[0]);
          const move = ev=>{ ev.preventDefault(); upd(ev.touches[0]); const raw=document.elementFromPoint(ev.touches[0].clientX, ev.touches[0].clientY); const drop=getDropZone(raw); document.querySelectorAll('.drag-zone,.drop-zone').forEach(z=>z.classList.remove('drag-over')); if(drop) drop.classList.add('drag-over'); };
          const end = ev=>{ const c=document.getElementById('drag-clone'); if(c){ const raw=document.elementFromPoint(ev.changedTouches[0].clientX, ev.changedTouches[0].clientY); const drop=getDropZone(raw); document.querySelectorAll('.drag-zone,.drop-zone').forEach(z=>z.classList.remove('drag-over')); if(drop && drop!==draggedElement.parentNode){ drop.appendChild(draggedElement); } draggedElement.style.opacity='1'; draggedElement=null; c.remove(); } document.removeEventListener('touchmove', move, {passive:false}); document.removeEventListener('touchend', end); };
          document.addEventListener('touchmove', move, {passive:false});
          document.addEventListener('touchend', end, {once:true});
        }
      }, {passive:false});
    }

    function checkActivity1(){
      let correct=0, total=9; const zones=document.querySelectorAll('.drag-zone');
      zones.forEach(zone=>{ const profile=zone.dataset.profile; const items=zone.querySelectorAll('.suggestion-item');
        items.forEach(item=>{ if(item.dataset.target===profile){ correct++; Object.assign(item.style,{background:'#e8f5e8',color:'#2d5a2d',border:'1px solid #4caf50'}); } else { Object.assign(item.style,{background:'#ffebee',color:'#5d1e1e',border:'1px solid #f44336'}); } item.draggable=false; });
      });
      const score = Math.round((correct/total)*MAX_A1); totalScore += score;
      showFeedback(`Activit√© 1 : ${correct}/${total} bonnes r√©ponses ! (+${score} pts)`);
      document.getElementById('nextA2').style.display='inline-block';
      updateProgress();
    }

    function checkActivity2(){
      const cbs=document.querySelectorAll('#activity2 input[type="checkbox"]'); let correct=0, total=7;
      cbs.forEach(cb=>{ const ok=cb.dataset.correct==='true'; const on=cb.checked; if((ok&&on)||(!ok&&!on)){ correct++; cb.parentNode.style.background='#e8f5e8'; cb.parentNode.style.borderLeft='4px solid #4caf50'; } else { cb.parentNode.style.background='#ffebee'; cb.parentNode.style.borderLeft='4px solid #f44336'; } cb.disabled=true; });
      const score=Math.round((correct/total)*MAX_A2); totalScore += score;
      showFeedback(`Activit√© 2 : ${correct}/${total} bonnes r√©ponses ! (+${score} pts)`);
      document.getElementById('nextA3').style.display='inline-block';
      updateProgress();
    }

    function checkActivity3(){
      let correct=0, total=8; const advZ=document.getElementById('advantagesZone'); const disZ=document.getElementById('disadvantagesZone');
      advZ.querySelectorAll('.advantage-item,.disadvantage-item').forEach(it=>{ if(it.dataset.type==='advantage'){ correct++; it.style.border='2px solid #4caf50'; it.style.background='#e8f5e8'; } else { it.style.border='2px solid #f44336'; it.style.background='#ffebee'; } it.draggable=false; it.style.color='#333'; });
      disZ.querySelectorAll('.advantage-item,.disadvantage-item').forEach(it=>{ if(it.dataset.type==='disadvantage'){ correct++; it.style.border='2px solid #4caf50'; it.style.background='#e8f5e8'; } else { it.style.border='2px solid #f44336'; it.style.background='#ffebee'; } it.draggable=false; it.style.color='#333'; });
      const score=Math.round((correct/total)*MAX_A3); totalScore += score;
      showFeedback(`Activit√© 3 : ${correct}/${total} bonnes r√©ponses ! (+${score} pts)`);
      document.getElementById('nextA4').style.display='inline-block';
      updateProgress();
    }

    function showFeedback(msg){
      document.querySelector('.activity.active .feedback')?.remove();
      const f=document.createElement('div'); f.className='feedback'; f.innerHTML=`<p>${msg}</p>`;
      const act=document.querySelector('.activity.active'); const nav=act.querySelector('.navigation'); nav.parentNode.insertBefore(f, nav);
    }

    function updateProgress(){
      const progress = (currentActivity/totalActivities)*100; document.getElementById('progressFill').style.width = progress + '%';
      const liveTotal = totalScore + getTeacherPoints(); // affiche toujours sur 100
      document.getElementById('score').textContent = `Score: ${liveTotal}/100`;
    }

    function nextActivity(){
      const cur=document.querySelector('.activity.active'); if(cur) cur.classList.remove('active'); cur?.querySelector('.feedback')?.remove();
      currentActivity++; if(currentActivity<=totalActivities){ document.getElementById(`activity${currentActivity}`).classList.add('active'); if(currentActivity===totalActivities){ showFinalResults(); } }
      updateProgress();
    }

    function previousActivity(){
      if(currentActivity>1){ document.querySelector('.activity.active').classList.remove('active'); currentActivity--; document.getElementById(`activity${currentActivity}`).classList.add('active'); updateProgress(); document.querySelector('.activity.active .feedback')?.remove(); }
    }

    function showFinalResults(){
      const teacherPts = getTeacherPoints();
      const finalTotal = totalScore + teacherPts; // total sur 100
      const fs = document.getElementById('finalScore'); const fm = document.getElementById('finalMessage');
      fs.textContent = `Votre score : ${finalTotal}/100 (dont ${teacherPts} point${teacherPts>1?'s':''} du professeur)`;
      if(finalTotal>=80){ fm.textContent='üåü Excellent ! Vous ma√Ætrisez bien les enjeux des algorithmes de recommandation et comment briser la bulle de filtre.'; fm.style.color='#4caf50'; }
      else if(finalTotal>=60){ fm.textContent='üëç Bien jou√© ! Vous avez une bonne compr√©hension du sujet, mais quelques r√©visions seraient utiles.'; fm.style.color='#ff9800'; }
      else { fm.textContent='üìö Pas de souci ! Relisez le cours et retentez le quiz pour mieux comprendre les m√©canismes de l\'IA.'; fm.style.color='#f44336'; }
      document.getElementById('finalResults').style.borderLeft = `4px solid ${finalTotal>=80?'#4caf50':finalTotal>=60?'#ff9800':'#f44336'}`;
    }

    function restartQuiz(){
      currentActivity=1; totalScore=0; document.querySelector('.activity.active')?.classList.remove('active'); document.getElementById('activity1').classList.add('active');
      document.querySelectorAll('.suggestion-item,.advantage-item,.disadvantage-item').forEach(it=>{ it.style.background=''; it.style.color=''; it.style.border=''; it.draggable=true; });
      document.querySelectorAll('.checklist-item').forEach(it=>{ it.style.background=''; it.style.borderLeft=''; });
      document.querySelectorAll('.feedback').forEach(f=>f.remove());
      document.querySelectorAll('input[type="checkbox"]').forEach(cb=>{ cb.checked=false; cb.disabled=false; });
      const kit=document.getElementById('antiBubbleKit'); if(kit) kit.value=''; const tpi=document.getElementById('teacherPoints'); if(tpi) tpi.value=0;
      const suggestionsPool=document.getElementById('suggestionsPool'); document.querySelectorAll('.suggestion-item').forEach(it=>suggestionsPool.appendChild(it));
      const itemsPool=document.getElementById('itemsPool'); document.querySelectorAll('.advantage-item,.disadvantage-item').forEach(it=>itemsPool.appendChild(it));
      document.querySelectorAll('[id^="nextA"]').forEach(btn=>{ if(btn.id!=='nextA5'){ btn.style.display='none'; } });
      updateProgress();
    }

    document.addEventListener('DOMContentLoaded', ()=>{ setupDragAndDrop(); updateProgress(); });
  </script>
</body>
</html>


